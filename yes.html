<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hi there âœ¨</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        body {
            height: 100vh;
            background: radial-gradient(circle, #0f2027, #000);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            margin: 0;
            overflow: hidden; /* Prevent scrollbars from fireworks */
        }

        .box {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 420px;
            position: relative;
            z-index: 1; /* Ensure text is above fireworks */
        }

        h1 {
            color: #e63946;
        }

        p {
            font-size: 18px;
            margin-top: 10px;
        }

        #congratsMessage {
            font-size: 17px;
            margin-top: 30px;
            opacity: 0.9;
            text-align: justify; /* Justify text for readability */
            line-height: 1.6; /* Better line spacing */
            padding: 0 10px; /* Slight padding to avoid edge crowding */
        }

        canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind the text */
            display: none; /* Initially hidden */
        }

        #instruction {
            font-size: 14px;
            margin-top: 20px;
            opacity: 0.7;
        }
    </style>
</head>

<body>

    <!-- Fireworks Canvas -->
    <canvas id="fireworksCanvas"></canvas>

    <!-- Background Music -->
    <audio id="bgMusic" loop>
        <source src="final.mp4" type="audio/mpeg">
    </audio>

    <!-- Fireworks Sound -->
    <audio id="fireworksSound" loop>
        <source src="fireworks.mp4" type="audio/mpeg"> <!-- Replace with your fireworks sound file -->
    </audio>

    <!-- Typing Sound -->
    <audio id="typingSound">
        <source src="typing.mp3" type="audio/mpeg"> <!-- Replace with your typing sound file (e.g., a short keypress sound) -->
    </audio>

    <div class="box">
        <h1>âœ¨ Hi Clyde!âœ¨</h1>

        <!-- Expanded congratulatory message (will be typed out after click) -->
        <p id="congratsMessage"></p>

        <p id="instruction" style="font-size:14px; margin-top:20px; opacity:0.7;">
            (Tap anywhere to start the celebration ðŸŽµ)
        </p>
    </div>

    <script>
        // Variables for typing and fireworks
        const congratsText = "Guess what HAHAHAHAHAH? Dik ammo ibagak  and lol this might sound a little cringe. I donâ€™t know exactly what this year was like for you, but I still wanted to CONGRATULATE YOU for getting through it. Just SURVIVING a year already says a lot. Wishing you a really good 2026 and more GOOD DAYS, SMALL WINS, and LIGHTER MOMENTS. I also think itâ€™d be nice to get to know youuuu lol â€¦ I have a feeling youâ€™re someone worth knowing.ðŸŒŸ";
        let charIndex = 0;
        const congratsElement = document.getElementById("congratsMessage");
        const canvas = document.getElementById("fireworksCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        const particles = [];
        const fireworks = [];
        const music = document.getElementById("bgMusic");
        const fireworksSound = document.getElementById("fireworksSound");
        const typingSound = document.getElementById("typingSound");
        const instruction = document.getElementById("instruction");

        let started = false; // Flag to ensure it only starts once

        // Function to start everything on click
        function startCelebration() {
            if (started) return; // Prevent multiple starts
            started = true;

            // Hide instruction
            instruction.style.display = "none";

            // Play music and sounds
            music.volume = 0.4;
            music.play();
            fireworksSound.volume = 0.3;
            fireworksSound.play();

            // Show canvas and start fireworks
            canvas.style.display = "block";
            setTimeout(() => {
                setInterval(() => {
                    fireworks.push(new Firework());
                }, 1200); // Slower launches for slow-mo effect
                animate();
            }, 1000);

            // Start typing message
            setTimeout(typeCongrats, 2000);
        }

        // Add click listener to body
        document.body.addEventListener("click", startCelebration, { once: true });

        // Typewriter effect for congratulatory message with sound
        function typeCongrats() {
            if (charIndex < congratsText.length) {
                congratsElement.innerHTML += congratsText.charAt(charIndex);
                charIndex++;
                // Play typing sound
                typingSound.currentTime = 0; // Restart sound if overlapping
                typingSound.play().catch(() => {}); // Ignore errors if sound fails
                setTimeout(typeCongrats, 100); // Slower typing for emphasis
            }
        }

        // Fireworks classes and functions (unchanged)
        class Particle {
            constructor(x, y, color, velocityX, velocityY, size, isText = false, text = '') {
                this.x = x;
                this.y = y;
                this.color = color;
                this.velocityX = velocityX;
                this.velocityY = velocityY;
                this.size = size;
                this.alpha = 1;
                this.isText = isText;
                this.text = text;
                this.trail = []; // Store trail positions
            }

            update() {
                // Add to trail
                this.trail.push({ x: this.x, y: this.y });
                if (this.trail.length > 10) this.trail.shift(); // Limit trail length

                this.x += this.velocityX;
                this.y += this.velocityY;
                this.velocityY += 0.04; // Reduced gravity for slow-mo
                this.alpha -= 0.005; // Slower fade for lingering effect
            }

            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;

                // Draw trail
                ctx.strokeStyle = this.color;
                ctx.lineWidth = this.size / 2;
                ctx.beginPath();
                for (let i = 1; i < this.trail.length; i++) {
                    ctx.moveTo(this.trail[i - 1].x, this.trail[i - 1].y);
                    ctx.lineTo(this.trail[i].x, this.trail[i].y);
                }
                ctx.stroke();

                // Draw particle
                if (this.isText) {
                    ctx.font = `${this.size * 5}px Arial`;
                    ctx.fillStyle = this.color;
                    ctx.fillText(this.text, this.x, this.y);
                } else {
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
                ctx.restore();
            }
        }

        class Firework {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = canvas.height;
                this.targetY = Math.random() * canvas.height / 2;
                this.speed = Math.random() * 3 + 2; // Slightly slower launch
                // Randomly choose silver or gold
                this.isGold = Math.random() > 0.5;
                this.color = this.isGold 
                    ? `rgb(255, ${215 + Math.random() * 40}, 0)` // Gold variations
                    : `rgb(${192 + Math.random() * 64}, ${192 + Math.random() * 64}, ${192 + Math.random() * 64})`; // Silver variations
                this.exploded = false;
                this.secondaryExploded = false;
                this.explodeDelay = Math.random() * 200 + 600; // Longer delay for slow-mo double pop
            }

            update() {
                if (!this.exploded) {
                    this.y -= this.speed;
                    if (this.y <= this.targetY) {
                        this.explode();
                    }
                } else if (!this.secondaryExploded && Date.now() - this.explodeTime > this.explodeDelay) {
                    this.secondaryExplode(); // Double pop-up
                }
            }

            explode() {
                this.exploded = true;
                this.explodeTime = Date.now();
                this.createParticles(60); // More particles for first burst
            }

            secondaryExplode() {
                this.secondaryExploded = true;
                this.createParticles(30, true); // Smaller secondary burst
            }

            createParticles(count, isSecondary = false) {
                const name = "Happy New Year";
                for (let i = 0; i < count; i++) {
                    const angle = (Math.PI * 2) / count * i + (isSecondary ? Math.PI / count : 0); // Offset for secondary
                    const velocity = Math.random() * 2 + 1; // Reduced velocity for slow-mo
                    const velocityX = Math.cos(angle) * velocity;
                    const velocityY = Math.sin(angle) * velocity;
                    const size = Math.random() * 3 + 1;

                    if (i < name.length) {
                        // Text particle for name (always included, using firework color)
                        particles.push(new Particle(this.x, this.y, this.color, velocityX, velocityY, size, true, name[i]));
                    } else {
                        // Regular particle
                        particles.push(new Particle(this.x, this.y, this.color, velocityX, velocityY, size));
                    }
                }
            }

            draw() {
                if (!this.exploded) {
                    ctx.fillStyle = this.color;
                    ctx.fillRect(this.x, this.y, 3, 15); // Thicker launch trail
                }
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Update and draw fireworks
            fireworks.forEach((firework, index) => {
                firework.update();
                firework.draw();
                if (firework.secondaryExploded) {
                    fireworks.splice(index, 1);
                }
            });

            // Update and draw particles
            particles.forEach((particle, index) => {
                particle.update();
                particle.draw();
                if (particle.alpha <= 0) {
                    particles.splice(index, 1);
                }
            });

            requestAnimationFrame(animate);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>

</body>
</html>
